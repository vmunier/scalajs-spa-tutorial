<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>Routing | Scala.js SPA-tutorial</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.0.0">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="./main-menu.html" />
    
    
    <link rel="prev" href="./the-client.html" />
    

        
    </head>
    <body>
        
        
    <link rel="stylesheet" href="gitbook/style.css">
    
    

        
    <div class="book" data-level="2.1.1" data-basepath="." data-revision="Thu Apr 02 2015 21:30:06 GMT+0300 (FLE Daylight Time)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="getting-started.html">
            
                
                    <a href="./getting-started.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Getting started
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="application-structure.html">
            
                
                    <a href="./application-structure.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Application structure
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="the-client.html">
            
                
                    <a href="./the-client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        The Client
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="2.1.1" data-path="routing.html">
            
                
                    <a href="./routing.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        Routing
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="main-menu.html">
            
                
                    <a href="./main-menu.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.2.</b>
                        
                        Main menu
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="dashboard.html">
            
                
                    <a href="./dashboard.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.</b>
                        
                        Dashboard
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="css-in-scala.html">
            
                
                    <a href="./css-in-scala.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.4.</b>
                        
                        CSS in Scala
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="integrating-javascript-components.html">
            
                
                    <a href="./integrating-javascript-components.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.5.</b>
                        
                        Integrating JavaScript components
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.1.6" data-path="todo-module-and-data-flow.html">
            
                
                    <a href="./todo-module-and-data-flow.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.6.</b>
                        
                        Todo module and data flow
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.1.7" data-path="autowire-and-upickle.html">
            
                
                    <a href="./autowire-and-upickle.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.7.</b>
                        
                        Autowire and uPickle
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="server-side.html">
            
                
                    <a href="./server-side.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Server side
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="testing.html">
            
                
                    <a href="./testing.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Testing
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="debugging.html">
            
                
                    <a href="./debugging.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Debugging
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="logging.html">
            
                
                    <a href="./logging.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Logging
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="sbt-build-definition.html">
            
                
                    <a href="./sbt-build-definition.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        SBT build definition
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="serving-compiled-js-from-both-projects.html">
            
                
                    <a href="./serving-compiled-js-from-both-projects.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Serving compiled JS from both projects
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="sharing-web-resources-between-js-and-jvm-projects.html">
            
                
                    <a href="./sharing-web-resources-between-js-and-jvm-projects.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Sharing web resources between JS and JVM projects
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="using-resources-from-webjars.html">
            
                
                    <a href="./using-resources-from-webjars.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Using resources from WebJars
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="running-the-server-in-a-separate-jvm.html">
            
                
                    <a href="./running-the-server-in-a-separate-jvm.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                        Running the server in a separate JVM
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="production-build.html">
            
                
                    <a href="./production-build.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.5.</b>
                        
                        Production build
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="faq.html">
            
                
                    <a href="./faq.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        FAQ
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="what-next.html">
            
                
                    <a href="./what-next.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        What next?
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">Published with GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Share on Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Share on Google</button>
                <button type="button" data-sharing="facebook" class="button">Share on Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Share on Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Share on Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Scala.js SPA-tutorial</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="routing">Routing</h1>
<p>A critical feature in a SPA is navigation between &quot;pages&quot; within the application. Of course they are not real pages, since it&apos;s a <em>Single Page</em> Application,
but from the user point of view it looks like that. A typical example of a SPA is Gmail where the URL in the browser reflects the state of the application.</p>
<p>Since we are not loading new pages from the server, we cannot use the regular browser navigation but need to provide one ourselves. This is called <em>routing</em> and
is provided by many JS frameworks like AngularJS. Scala.js itself is not an application framework so there is no ready made router component provided by it. But
we are lucky to have developers like @japgolly who go through all the pain and suffering to deliver great libraries for the rest of us. In the tutorial I&apos;m using
<a href="https://github.com/japgolly/scalajs-react/blob/master/extra/ROUTER.md" target="_blank"><code>scalajs-react</code> router</a> which nicely integrates with <code>scalajs-react</code> and provides a
seamless way to manage routes and navigate between them.</p>
<p>The way it works is that you basically create route components, register them with the router and off it goes binding your components as the URL changes. The
provided examples build all routes within a single class, but in real life we want more modularity. In this tutorial we have a total of <em>two</em> modules/routes/views
just to demonstrate how to use the router.</p>
<p>As this is a Single Page Application, all routes are defined under one router, <code>MainRouter</code>, which extends <code>RoutingRules</code> trait.</p>
<pre><code class="lang-scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">MainRouter</span> <span class="hljs-keyword"><span class="hljs-keyword">extends</span></span> <span class="hljs-title">RoutingRules</span> {</span>
  <span class="hljs-comment">// register the components and store locations</span>
  <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">dashboardLoc</span> =</span> register(rootLocation(<span class="hljs-type">Dashboard</span>.component))
  <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">todoLoc</span> =</span> register(location(<span class="hljs-string">&quot;#todo&quot;</span>, <span class="hljs-type">ToDo</span>.component))
</code></pre>
<p>Here we just register the two routes with the <code>RoutingRules</code>. First route is our main route which is attached to the special <code>rootLocation</code>. The second
route is attached to <code>#todo</code> path. You could also use &quot;clean&quot; paths without the hash, but then your server must be prepared to server correct content
even when there is a sub-path defined. The hash also makes it easy to work with a local-only setup, when the files are served by the Workbench plugin.</p>
<p>The <code>MainRouter</code> also provides the base HTML code and integrates a <code>MainMenu</code> component for the application in its <code>interceptRender</code> function. SPA tutorial
uses Bootstrap CSS to provide a nice looking layout, but you can use whatever CSS framework you wish just by changing the CSS class definitions.</p>
<pre><code class="lang-scala"><span class="hljs-keyword">import</span> japgolly.scalajs.react.vdom.prefix_&lt;^._

<span class="hljs-keyword">override</span> <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">interceptRender</span>(</span>ic: <span class="hljs-type">InterceptionR</span>) = {
  &lt;.div(
    <span class="hljs-comment">// here we use plain Bootstrap class names as these are specific to the top level layout defined here</span>
    &lt;.nav(^.className := <span class="hljs-string">&quot;navbar navbar-inverse navbar-fixed-top&quot;</span>)(
      &lt;.div(^.className := <span class="hljs-string">&quot;container&quot;</span>)(
        &lt;.div(^.className := <span class="hljs-string">&quot;navbar-header&quot;</span>)(&lt;.span(^.className := <span class="hljs-string">&quot;navbar-brand&quot;</span>)(<span class="hljs-string">&quot;SPA Tutorial&quot;</span>)),
        &lt;.div(^.className := <span class="hljs-string">&quot;collapse navbar-collapse&quot;</span>)(
          <span class="hljs-type">MainMenu</span>(<span class="hljs-type">MainMenu</span>.<span class="hljs-type">Props</span>(ic.loc, <span class="hljs-type">TodoStore</span>.todos))
        )
      )
    ),
    <span class="hljs-comment">// currently active module is shown in this container</span>
    &lt;.div(^.className := <span class="hljs-string">&quot;container&quot;</span>)(ic.element)
  )
}
</code></pre>
<p>See how the code looks just like HTML, except it&apos;s type safe and the IDE provides auto-complete! If you insist on having even closer resemblance to HTML,
you can replace the <code>prefix_&lt;^</code> with <code>all</code> giving you simple <code>div</code> and <code>className</code> tag names. Be warned, however, that this may lead to nasty surprises
down the road because the HTML namespace contains a lot of short, common tag names like <code>a</code> and <code>id</code>. The little extra effort from <code>&lt;.</code> and <code>^.</code> pays
off in the long run.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./the-client.html" class="navigation navigation-prev " aria-label="Previous page: The Client"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./main-menu.html" class="navigation navigation-next " aria-label="Next page: Main menu"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
